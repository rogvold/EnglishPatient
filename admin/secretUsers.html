<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>

    <script src="../home/js/parse-1.2.18.min.js" ></script>
    <script src="../react/js/JSXTransformer.js" ></script>
    <script src="../react/js/react.min.js" ></script>

    <script src="../home/js/custom/common.js" ></script>

    <link  href="../vergels/mvp/plugins/semantic/semantic.min.css" rel="stylesheet" />

</head>
<body>

<div id="main"></div>

<script type="text/jsx">

    function loadUsers(callback){
        initParse();
        var q = new Parse.Query(Parse.User);
        q.limit(1000);
        q.addAscending('lastName');
        q.find(function(results){
            callback(results);
        });
    }

//    function extractAllTags(list){
//        var map = {};
//        for (var i in list){
//            var tags = list[i].get('tags');
//            for (var j in tags){
//                map[tags[j]] = tags[j];
//            }
//        }
//        var arr = [];
//        for (var key in map){
//            arr.push(key);
//        }
//        return arr;
//    }
//
//    function loadTags(callback){
//        loadMaterials(function(list){
//            var tags = extractAllTags(list);
//            tags = tags.sort();
//            callback(tags);
//        });
//    }

    var UsersList = React.createClass({
        getDefaultProps: function () {
            return {}
        },

        getInitialState: function () {
            return {
                users: []
            }
        },

        componentWillReceiveProps: function (nextProps) {

        },

        loadUsers: function(){
            var self = this;
            loadUsers(function(users){
                self.setState({
                    users: users
                });
            });
        },

        componentDidMount: function () {
            this.loadUsers();
        },

        componentStyle: {
            placeholder: {

            },
            itemStyle: {
                fontSize: 20,
                padding: 10
            }
        },

        render: function () {

            return (
                    <div style={this.componentStyle.placeholder}>
                        {this.state.users.map(function(user, i){
                            var key = i;
                            return (<div key={i} style={this.componentStyle.itemStyle}>
                                {(i + 1) + ') ' } <b>{user.get('lastName') + ' ' + user.get('firstName') }</b>
                                <sup>{user.get('userRole')}</sup>

                                <span style={{marginLeft: 20, fontStyle: "italic"}}>{user.get('email')}</span>

                                <span style={{marginLeft: 20, color: "lightgray", fontStyle: "italic"}}>{user.get('userPassword')}</span>

                            </div>);
                        }, this)}
                    </div>
            );
        }

    });

    React.render(<UsersList />, document.getElementById('main'));

</script>

</body>
</html>